% !TeX spellcheck = ru_RU
% !TEX root = vkr.tex

\section{Обзор}
\label{sec:relatedworks}

% В данном разделе нужно описать всё, что необходимо для понимания Вашей работы и что придумали не Вы.
% В дальнейших разделах нельзя прерывать повествование, например, для рассказа о деталях используемой технологии или архитектуре старой системы, потому что читателю будет трудно отличить Ваш вклад от не Вашего.

% Любой обзор пишется с какой-то целью (обосновать актуальность, найти и описать интересные решения, сравнить и выбрать технологии) и по какой-то методике поиска материала (например, поиск N релевантных статей на таких-то сервисах).
% Не будет лишним это всё явно описать.

%Необходимо выполнить обзор существующих динамических бинарных трансляторов и отдельно рассмотреть класс трансляторов с использованием тулчейна LLVM. Затем сравнить и выбрать инструмент для изучения и портирования на архитектуру RISC-V.

Для обзора предлагается рассмотреть популярные эмуляторы и инструменты для бинарного анализа, а также отдельно рассмотреть динамические бинарные трансляторы с поднятием инструкций в LLVM IR. В данной работе не будет рассмотрен динамический транслятор Rosetta 2, так как не имеет поддержки RISC-V и не является программным обеспечением с открытым исходным кодом, несмотря на то, что существуют попытки реверс-инжиниринга\footnote{\href{https://ffri.github.io/ProjectChampollion/}{https://ffri.github.io/ProjectChampollion/}}.

\subsection{Динамические бинарные трансляторы}
\subsubsection{Эмуляторы}
QEMU --- динамический бинарный транслятор с открытым исходным кодом, предназначенный для эмуляции обширного числа архитектур, который также поддерживает аппаратную виртуализацию. В качестве промежуточного представления используется TCG, в которое поднимаются базовые блоки транслируемой программы\cite{10.5555/1247360.1247401}. Транслятор, исходный код и транслируемый код находятся в одном адресном пространстве во время исполнения\cite{10.1145/3381052.3381319}. Поддерживает RISC-V как хост-архитектуру и как целевую архитектуру.

Box64 --- динамический бинарный транслятор с открытым исходным кодом, позволяющий запускать x86/x86\_64 программы на архитектурах ARM и RISC-V\footnote{\href{https://box86.org/2024/08/box64-and-risc-v-in-2024/}{https://box86.org/2024/08/box64-and-risc-v-in-2024/}}. Использует JIT-компилятор dynarec, который транслирует базовые блоки в хост архитектуру\footnote{\href{https://box86.org/2024/07/revisiting-the-dynarec/}{https://box86.org/2024/07/revisiting-the-dynarec/}}. Замеры с помощью nbench показали, что box64 работает быстрее QEMU\footnote{\href{https://ieeexplore.ieee.org/stamp/stamp.jsp?tp=\&arnumber=10077985}{https://ieeexplore.ieee.org/stamp/stamp.jsp?tp=\&arnumber=10077985}}.
\subsubsection{Инструменты для бинарного анализа}
Valgrind --- инструмент для динамического бинарного анализа с открытым исходным кодом и большим числом плагинов/динамических анализаторов, такие как: Memcheck, Callgrind, Cachegrind. В качестве промежуточного представления используется VEX, в которое поднимаются суперблоки транслируемой программы, где суперблок --- последовательность инструкций, в котором может быть несколько точек выхода\cite{10.1145/1250734.1250746}. Транслятор, плагин и транслируемая программа находятся в одном адресном пространстве. Поддерживает архитектуру RISC-V.

% Dynamo --- инструмент для динамического бинарного анализа.
\subsection{Динамические бинарные трансляторы с поднятием в LLVM IR}
%Обзор таких инструментов, как:
%\begin{itemize}
%    \item 
%    \item rev.ng;
%    \item llvm-mctoll;
%\end{itemize}
%был проведен в данной работе\footnote{\href{https://se.math.spbu.ru/thesis/texts/Frolov\_Timofej\_Sergeevich\_Spring\_practice\_2nd\_year\_2024\_text.pdf}{https://se.math.spbu.ru/thesis/texts/Frolov\_Timofej\_Sergeevich\_Spring\_practice\_2nd\_year\_2024\_text.pdf}}.
\subsubsection{Instrew}
Instrew --- динамический бинарный транслятор с поднятием инструкций в LLVM IR, открытым исходным кодом и клиент-сервер архитектурой. Как хост архитектуру процессора поддерживает x86\_64 и Aarch64, как целевую --- x86\_64, Aarch64, RISC-V. С помощью бинарного лифтера Rellume поднимает функции в LLVM IR. Может использоваться как эмулятор, так и как инструмент для бинарного анализа кода\cite{10.1145/3381052.3381319}.
% \subsubsection{Banschee}
\subsubsection{DBILL}
DBILL --- инструмент для динамического бинарного анализа, использующий TCG и LLVM IR, как промежуточные представления. Благодаря фронтэнду QEMU и тулчейну LLVM поддерживается множество хост и целевых архитектур\footnote{\href{https://doi.org/10.1145/2674025.2576213}{https://doi.org/10.1145/2674025.2576213}}. Из-за двух промежуточных представлений и поднятия в TCG только базовых блоков, есть проблемы с производительностью. Исходный код не был найден.
% \subsection{HQEMU}

\subsection{Выводы}
По результатам замеров\cite{dissertation}, Instrew оказался более производительным, чем QEMU и Valgrind. Хоть Box64 тоже оказывается производительнее чем QEMU, но не имеет API для произведения динамического бинарного анализа, что в сравнении с Instrew делает его менее универсальным.
Далее данная работа будет сосредоточена именно на ДБТ Instrew с поднятием в LLVM IR и добавлении поддержки архитектуры RISC-V для такого транслятора.
